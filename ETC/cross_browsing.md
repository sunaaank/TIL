### 크로스 브라우징이란?

- 표준 웹 기술을 따르면서(W3C 국제 웹 표준화 기구에서 제공하는 스펙을 따라서 동작함) 다른 기종 혹은 플랫폼에서 달리 구현되는 기술을 비슷하게 만듦과 동시에 어느 한쪽에 최적화되어 치우치지 않도록 공통 요소를 사용하여 웹페이지를 제작하는 기법을 말함
- 모든 브라우저와 디바이스에서 가능한 동등한 수준의 정보, 기능을 제공하는 것.
- 지원할 수 없는 다른 웹 브라우저를 위한 장치를 구현하여 모든 웹 브라우저 사용자가 방문했을 때 정보로서의 소외감을 느끼지 않도록 하는 방법론적 가이드를 의미하는 것이다.
  ex) 스크린 리더에서도 사이트를 읽을 수 있도록 함
- 똑같이 보일 필요는 없음( 최신 버전에서는 3D 이미지를 구버전 브라우저에서는 평면 도형을 보여주는 방식 )
- 플랫폼 사용자가 수용 가능한 수준으로 핵심 기능과 정보를 제공하도록 하는 것

### 크로스 브라우징 원칙

- 특정 브라우저에 종속성을 가진 기능은 가급적 사용을 배제한다.
- 웹 사이트는 그래픽을 연결하지 않은 상태로도 사용 가능해야 한다.
- 핵심 정보는 반드시 텍스트/HTML 포맷으로 제공되어야 한다. ex) flash 같은 것으로 전체 화면을 구성해서는 안된다.
- 핵심 정보를 표현하는데 이미지를 사용하는 것은 최소화해야 한다. 사용한다면 텍스트 형식의 alt 값을 제공해야 한다.

### 크로스 브라우징이 필요한 이유?

브라우저마다 렌더링 엔진이 다르기 때문
(크롬은 Webkit엔진을 사용하다 Blick엔진 사용, 파이어폭스는 Gecko, IE는 Trident엔진, 안드로이드와 iOS 기본 브라우저는 Webkit엔진 사용)

- 작동되지 않는 HTML5, JavaScript 코드가 존재
- 해석하지 못하는 CSS 코드 존재
- 브라우저 버그들 존재
- 브라우저마다 자체적인 default 스타일 존재

#### IE를 버전마다 크로스브라우징하는 이유

- 최신 버젼으로 자동 업데이트 되는 브라우저가 많으나 IE는 해당되지 않음
- IE는 사용자가 직접 업데이트 해야 하며, 윈도우 버전에 따라 최대 버전이 한정되어 있음

#### 브라우저 체크 방법

navigator 객체 등을 사용해 현재 사용자가 사용하고 있는 브라우저를 알 수 있음. 크롬, 파이어폭스는 appName이 Netscape라고 뜸.

- https://caniuse.com/
- http://validator.w3.org/

### 브라우저 대응 순서

1. 타겟이 되는(가장 점유율이 높은) 브라우저부터 맞춘다

- 점유율 조사 사이트 : http://gs.statcounter.com/
- 세계 2019/4 ~2020/4
  (1위 크롬 2위 사파리 3위 파이어폭스 그외 비슷비슷)
- 한국 2019/4 ~2020/4
  (크롬 1위, 2위-3위(엎치락뒤치락) 삼성인터넷, 사파리 4위 IE, 웨일 5위 파이어폭스 그외 비슷비슷)

2. 프론트의 브라우저 지원 확인 사이트인 캔아이유즈(https://caniuse.com/) 등 사이트의 도움을 받아 타겟 브라우저에 맞게 작업한다
3. 브라우저마다 차이가 나는 기본값을 초기화시킨다(CSS 초기화 작업)
4. IE용 주석을 이용한 방법 (Conditional comments)
   HTML 문서 내에서 주석을 이용하여 구별한다.

- lt (less than) 미만
- lte(less than or equal to) 이하
- gt(greater than) 초과
- gte(greater than or equal to) 이상

```html
<!-- [if IE 7]> <link href="ie7.css" type="text/css" rel="stylesheet"/> <![endif]-->
<!-- [if IE 8]> <p> 이 문구는 IE8이 포함되지 않은 하위 브라우저, 즉 IE7,6에서 보여지게 됩니다.</p> <![endif]-->
```

5. 메타 태그를 이용한 IE 모드

```html
<head>
  // ...
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  //...
</head>
```

#### 모든 브라우저를 지원할 수는 없을 경우

개발 기획 시 우리가 개발할 기능들을 정의하고, 그 기능들을 지원할 브라우저를 우선 파악한다.
제공하는 서비스에서 핵심적인 부분은 모든 브라우저에서 지원해야함.

타켓층을 예측하고,
신 브라우저 대상으로는 향상된 사용자 경험 제공
구 브라우저 대상으로는 핵심 기능 동작하도록 개발

- IE 하위버전에서 html5를 사용하려고 라이브러리를 사용하는 것은 성능을 저하시킬수 있다.
  : 보통 IE 버전이 낮을 수록, 컴퓨터 성능도 최신이 아닐 가능성이 크다. 그러므로 성능저하는 더 치명적일 수 있음.
- 크로스 브라우징은 동일성이 아닌 동등성을 추구한다.

### 크로스 브라우징 방법

1. 라이브러리 사용 가능
   BUT 이 라이브러리를 사용하기 위해 저 라이브러리를 추가해야 할 수 있음.

1) jQuery
   : jQuery에서는 자바스크립트 이벤트에 대해 크로스 브라우징 기능을 제공한다. 따라서 개발자는 어떤 브라우저에 대한 지원 코드를 작성해야 할지에 대해 걱정하지 않아도 된다는 장점이 있다.
2) 폴리필
   : 폴리필(polyfill)은 개발자가 특정 기능이 지원되지 않는 브라우저를 위해 사용할 수 있는 코드 조각이나 플러그인을 말한다. 폴리필은 HTML5 및 CSS3와 오래된 브라우저 사이의 간격을 메꾸는 역할을 담당한다.

(MDN) polyfill이 독점적으로 사용되지 않는 이유는 더 나은 기능성과 더 나은 성능을 위해서입니다. API의 기본 구현은 polyfill보다 더 많은 작업을 수행 할 수 있고 더 빠릅니다. ... 현대 브라우저는 대부분 표준 시맨틱에 따라 광범위한 API 세트를 구현하기 때문에 폴리 필을 사용하여 브라우저별 구현을 처리하는 것은 오늘날 실제로 존재하지 않습니다.

- https://cdn.polyfill.io/v3/
- http://hacks.mozilla.or.kr/2014/12/an-easier-way-of-using-polyfills/
- https://developer.mozilla.org/ko/docs/Glossary/Polyfill

2. 직접 구현 시, `기능 탐지`를 이용할 것.
   각 브라우저에서 지원하는 함수, 메소드, 그리고 기능들이 다르기 때문, if문을 통해 분기를 설정한 이후에 함수를 적용해야 할 것.
3. feature detection이라는 방법이 있음
   : 어떤 브라우저 인지는 알 필요 없고, 브라우저에 내가 제공하고자 하는 기능이 있는지 확인하는 방법

4. 각종 Tool이 존재함

1) 웹 표준을 지키고 있는 지 검사할 것

- 검색 키워드 : `Cross -Browser Compatibility`

2. reset.css (normalize.css) 사용

- CSS의 경우 브라우저마다 기본 스타일이 제각각임
- 동일한 스타일을 적용하기 위해서는 default값을 초기화 시켜줘야 함
- 라이브러리도 있음. 무작정 쓰기보다, 어떤 의미에서 초기화 시키는 지 알고 쓸 것

3. prefix를 적어주자

- 아직 웹표준이 안된 기능을 브라우저들이 가져다 지원하기 때문에 기능 앞에 각 브라우저들의 엔진을 prefix로 적어주는 것.
- 모든 브라우저에서 지원하는 호환 프로퍼티를 먼저 정의하고, CSS3에서 지원하는 프로퍼티를 나중에 정의하는 방법을 사용해야 한다.

### 개선 방법

1. SVG 애니메이션의 지원

- 단위 표시를 해줘야 함

2. 백그라운드 투명도에 대한 크로스브라우징 이슈

- IE는 HEX 코드를 읽지 못해서, 색상값을 RGBA로 넣어주어야 함
- IE11를 제외한 IE10 이하 버젼은 신경을 쓰지 말자는 것이 크로스브라우징 이슈에 대응하는 자세

3. flex 속성 미적용

- ie10은 flex 적용을 위해 -ms -prefix를 적어줘야 함.
- ex10-11에서 flex-grow, flex-basis는 상위 div에 width, height를 명시해야 적용되고, 다른 방법으로는 -ms-flex: 0 1 auto로 대체할 수 있음

### 참고 자료

- [MDN 공식문서](https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS)
- 프론트의 브라우저 지원 확인 사이트 : [Can I use](https://caniuse.com/)
- flexbox 버그 리스트: [Github - flexbugs](https://github.com/philipwalton/flexbugs)
- 웹 표준검사 : [Markup Validation Service](http://validator.w3.org/) / [CSS Validation Service](https://jigsaw.w3.org/css-validator/)
- [크로스브라우징 총정리](https://hackya.com/kr/%ED%81%AC%EB%A1%9C%EC%8A%A4-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A7%95-%EC%B4%9D%EC%A0%95%EB%A6%AC/)
