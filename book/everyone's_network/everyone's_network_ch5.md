# 책 <모두의 네트워크> 개념정리
## 5. 네트워크 계층: 목적지에 데이터 전달하기
- IP를 이해한다
- 라우터를 이해한다
- IP 주소를 이해한다
- 서브넷을 이해한다
- 라우팅을 이해한다

### Lesson17
- `데이터 링크 계층`에서는 이더넷 규칙을 기반으로 데이터 전송을 담당.
=> 같은 네트워크에 있는 컴퓨터로는 데이터 전송 가능 BUT 인터넷이나 다른 네트워크로는 전송 불가
- `네트워크 계층`: 서로 다른 네트워크에 있는 목적지로 데이터를 전송하기 위해 필요 = 네트워크 간의 통신
- `라우터(router)`: 네트워크 계층을 통해 다른 네트워크로 데이터를 전송하려면 필요한 네트워크 장비. 데이터의 목적지가 정해지면, 해당 목적지까지 어떤 경로로 가는 것이 좋은 지 알려주는 기능. `라우팅 테이블`이 있어 경로 정보를 등록하고 관리함. 거리에 관계없이 다른 네트워크로 데이터를 보낼 수 있음.
- 랜에서는 MAC주소만으로 통신 가능 BUT 다른 네트워크에는 데이터를 보낼 수 없음. => IP주소가 필요함
- `IP주소`: 어떤 네트워크의 어떤 컴퓨터인지 구분할 수 있도록 하는 주소
=> 다른 네트워크에 있는 목적지를 지정할 수 있음
- `라우팅`: 목적지 IP 주소까지 어떤 경로로 데이터를 보낼 지 결정하는 것. => 데이터의 목적지 뿐만 아니라 전송 경로도 지정해주어야 함
- `라우팅 테이블`: 경로 정보를 등록하고 관리함
- `IP`: 네트워크 계층의 프로토콜. 캡슐화 할 때 `IP헤더`를 붙임.
- `IP헤더`: 데이터를 정확하게 전달하기 위한 정보 포함
- IP헤더 정보: 버젼(version)/헤더길이(header length)/서비스유형(service type)/전체패킷길이(total length)/ID(일련번호)/조각상태(flags)/조각의 위치(fragment offset)/TTL/프로토콜(protocol)/헤더 체크섬(header checksum)/출발지(source)IP주소(32bit)/목적지(destination)IP주소(32bit) 순으로 헤더 정보 구성됨
- `IP패킷`: IP프로토콜을 사용하여 캡슐화할 때 `IP헤더`가 추가된 데이터(cf.`데이터 링크 계층`에서는 데이터에 이더넷헤더, 트레일러가 붙은 것이 `프레임`)

### Lesson18
- `IP주소`는 인터넷서비스제공자(ISP)로부터 받을 수 있음. 공인IP주소/사설IP주소
- `공인IP주소`: 인터넷에 직접 연결되는 컴퓨터나 라우터에 할당
- `사설IP주소`: 회사나 가정의 랜에 있는 컴퓨터에 할당
=> 인터넷 서비스 공급자가 제공하는 공인IP주소는 라우터에만 할당, 랜 안에 있는 컴퓨터에는 랜의 네트워크 관리자가 자유롭게 사설IP주소를 할당하거나, 라우터의 DHCP기능을 사용해 주소를 자동으로 할당함
=> 공인IP주소 절약 가능. (공인IP주소 한 개로 랜 안에 있는 컴퓨터 n개에 인터넷에 연결할 수 있는 환경을 만들 수 있음)
- `DHCP(Dynamic Host Configuration Protocool)`: IP주소를 자동으로 할당하는 프로토콜 
- `IP버젼`: IPv4/IPv6
- `IPv4`: 32비트, 약 43억게 만들 수 있었음. BUT 인터넷이 널리 보급되며 IP주소가 부족해짐 => IPv6등장
- `IPv6`: 128비트. IPv4보다 많은 주소를 만들 수 있음
- 당분간은 `IPv4`와 `IPv6`를 공존해서 사용함
- MAC주소는 48비트로, 16진수로 표시
- IP주소는 32비트로, 10진수로 표시 BUT 실제 IP주소는 2진수로 되어있음
- `IP주소` = 네트워크ID + 호스트ID
- `네트워크ID`: 어떤 네트워크인지 나타냄
- `호스트ID`: 해당 네트워크의 어느 컴퓨터인지 나타냄


### Lesson19
- `네트워크 클래스`: 네트워크의 크기 구분
- 일반 네트워크에서는 A~C클래스 사용 가능
1) A클래스: 대규모 네트워크 주소(1~127)
2) B클래스: 중형 네트워크 주소(128~191)
3) C클래스: 소규모 네트워크 주소(192~223)
4) D클래스: 멀티캐스트(multicast) 네트워크 주소
5) E클래스: 연구 및 특수용도 주소

- 공인 IP주소와 사설IP주소의 범위가 구분됨
- 사설IP주소는 절대로 공인IP주소로 사용할 수 없음
- 사설IP주소
- A클래스: 10.0.0.0 ~ 10.255.255.255
- B클래스: 172.16.0.0 ~ 172.31.255.255
- C클래스: 192.168.0.0 ~ 192.168.255.255 (가정의 랜에서 주로 사용)

### Lesson20
- `IP주소`에는 `네트워크 주소`와 `브로드캐스트 주소`가 있음
- 컴퓨터나 라우터가 자신의 IP로 사용하면 안되는 주소
- `네트워크 주소`: 전체 네트워크에서 작은 네트워크를 식별하는 데 사용됨. 호스트ID가 10진수로 9이면, 그 네트워크 전체를 대표하는 주소가 됨
=> 전체 네트워크의 대표 주소
- ex) 네트워크 주소 192.168.1.0이란? 192.168.1.1 ~ 192.168.1.6은 192.168.1.0의 네트워크에 있다
- `브로드캐스트 주소`: 네트워크에 있는 컴퓨터나 장비 모두에게 한 번에 데이터를 전송하는데 사용되는 전용 IP주소
ex) 브로드캐스트 주소 192.168.1.255
- `브로드캐스트`: IP 네트워크에 있는 모든 컴퓨터(호스트)로 데이터를 전송하는 방식
- `멀티캐스트`: 한 컴퓨터(호스트)에서 패킷을 여러 컴퓨터로 동시에 전송하는 것

=> 네트워크 주소와 브로드캐스트 주소는 자신의 IP 주소로 설정하면 안된다. (컴퓨터에 설정할 수 없음)


### Lesson21
- 많은 수의 컴퓨터가 브로드캐스트 패킷을 전송하면 모든 컴퓨터에 패킷이 전송되고 네트워크가 혼잡해짐 => 대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트로 전송되는 패킷의 범위를 좁힘 => 더 많은 네트워크를 만들 수 있어 IP 주소를 효과적으로 활용할 수 있음
- `서브넷팅(subneting)`: 네트워크 분할하는 것
- `서브넷(subnet)`: 분할된 네트워크
- 기존 네트워크에서 `네트워크ID`와 `호스트ID`로 나눠져 있던 것이, 서브넷팅을 하면 `호스트ID`로 사용하던 비트를 일부 빌려와 `서브넷ID`로 만듦
- `서브넷 마스크`: 네트워크 주소와 호스트 주소를 식별하는 값
- `프리픽스 표기법`: 서브넷 마스크를 슬래시(/비트)로 나타내는 것

### Lesson22
- `라우터`: 네트워크 분리
- `스위치`만 있는 네트워크에서는 모든 컴퓨터와 스위치가 동일한 네트워크에 속하게 됨
- 네트워크를 분할한 다음에 컴퓨터 한 대가 다른 네트워크로 접속하려면? 라우터의 IP의 주소를 설정해야 함
- `기본 게이트웨이(default gateway)`: 네트워크의 출입구를 설정하는 것
=> 컴퓨터는 다른 네트워크로 데이터를 보낼 때 어디로 전송해야 하는 지 알지 못함. => 네트워크의 출입구를 지정하고 라우터로 데이터를 전송함
- 라우터의 `라우팅`기능: 경로 정보를 기반으로 현재의 네트워크에서 다르 네트워크로 최적의 경로를 통해 데이터를 전송
- `라우팅 테이블`: 이 경로 정보가 등록되어 있는 테이블
- 라우팅 테이블 등록 방법? 수동 등록:소규모 네트워크에 적합/ 자동 등록: 대규모 네트워크에 적합
- `라우팅 프로토콜`: 라우터간에 라우팅 정보를 교환하기 위한 프로토콜. 
=> 라우팅 프로토콜을 설정하여 라우터간 경로 정보를 교환하고, 그걸 라우팅 테이블에 등록함 ex) RIP, OSPF, BGP 등
